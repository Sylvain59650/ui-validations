"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};window.isDef=function(obj){return obj!==null&&typeof obj!=="undefined"};document.ready=function(fn){if(document.attachEvent?document.readyState==="complete":document.readyState!=="loading"){fn()}else{document.addEventListener("DOMContentLoaded",fn)}};document.getJSON=function(url,onSuccess,onError,options){var request=new XMLHttpRequest;if(isDef(options)){if(options.forceReload){var rnd=Math.random();url+=url.indexOf("?")===-1?"?":"&";url+="___t="+rnd}}request.open("GET",url,true);request.onload=function(){if(request.status>=200&&request.status<400){if(onSuccess){var result="";if(request.status===200){if(isDef(request.responseText)&&request.responseText!==""){result=JSON.parse(request.responseText)}else{result="{}"}}onSuccess(result)}}else{console.error("ajax error",request);if(onError){onError(request)}}};request.send()};document.ajax=function(method,url,data,onSuccess,onError){var request=new XMLHttpRequest;request.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8");request.open(method,url,true);request.onload=function(){if(request.status>=200&&request.status<400){if(onSuccess){onSuccess(request.responseText)}}else{if(onError){onError(request)}}};request.send(data)};document.getScripts=function(arrScriptsUrl){var _iteratorNormalCompletion=true;var _didIteratorError=false;var _iteratorError=undefined;try{for(var _iterator=arrScriptsUrl[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=true){var url=_step.value;document.afterBegin(newElement("script",{src:url}))}}catch(err){_didIteratorError=true;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}};document.getScriptsIf=function(condition,arrScriptsUrl){if(condition){document.getScripts(arrScriptsUrl)}};document.getStyles=function(arrStylessUrl){var media=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"all";var _iteratorNormalCompletion2=true;var _didIteratorError2=false;var _iteratorError2=undefined;try{for(var _iterator2=arrStylessUrl[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=true){var url=_step2.value;document.afterBegin(newElement("link",{rel:"stylesheet",type:"text/css",href:url,media:media}))}}catch(err){_didIteratorError2=true;_iteratorError2=err}finally{try{if(!_iteratorNormalCompletion2&&_iterator2.return){_iterator2.return()}}finally{if(_didIteratorError2){throw _iteratorError2}}}};HTMLButtonElement.prototype.setNoChanges=function(){};HTMLButtonElement.prototype.isModified=function(){return false};HTMLElement.prototype.addClass=function(className){var classes=className.split(" ");for(var i=0;i<classes.length;i++){var cl=classes[i];if(this.classList.contains(cl)){continue}this.classList.add(cl)}return this};HTMLElement.prototype.removeClass=function(className){var classes=className.split(" ");this.classList.remove(classes);return this};HTMLElement.prototype.toggleClass=function(className){var classes=className.split(" ");for(var i=0;i<classes.length;i++){var cl=classes[i];if(this.classList.contains(cl)){this.classList.remove(cl)}else{this.classList.add(cl)}}};HTMLElement.prototype.class=function(classNames){var classes=classNames.split(" ");for(var i=0;i<classes.length;i++){var cl=classes[i];if(cl[0]==="-"){cl=cl.substring(1);if(this.classList.contains(cl)){this.classList.remove(cl)}}else{if(cl[0]==="+"){cl=cl.substring(1)}this.classList.add(cl)}}};HTMLElement.prototype.hasClass=function(className){return this.classList.contains(className)};HTMLElement.prototype.css=function(cssProperty,cssValue){var s=this.style;if(arguments.length===1&&typeof cssProperty==="string"){return s[cssProperty]}if((typeof cssProperty==="undefined"?"undefined":_typeof(cssProperty))==="object"){for(var p in cssProperty){s[p]=cssProperty[p]}}else{this.style[cssProperty]=cssValue}return this};HTMLElement.prototype.beforeBeginHTML=function(html){return this.insertAdjacentHTML("beforebegin",html)};HTMLElement.prototype.afterBeginHTML=function(html){return this.insertAdjacentHTML("afterBegin",html)};HTMLElement.prototype.beforeEndHTML=function(html){return this.insertAdjacentHTML("beforeEnd",html)};HTMLElement.prototype.afterEndHTML=function(html){return this.insertAdjacentHTML("afterEnd",html)};HTMLElement.prototype.beforeBegin=function(el){return this.insertAdjacentElement("beforebegin",el)};HTMLElement.prototype.afterBegin=function(el){return this.insertAdjacentElement("afterbegin",el)};HTMLElement.prototype.beforeEnd=function(el){return this.insertAdjacentElement("beforeend",el)};HTMLElement.prototype.afterEnd=function(el){return this.insertAdjacentElement("afterend",el)};HTMLElement.prototype.outerHeight=function(withMargin){if(withMargin){var height=this.offsetHeight;var style=getComputedStyle(this);height+=parseInt(style.marginTop,10)+parseInt(style.marginBottom,10);return height}return this.offsetHeight};HTMLElement.prototype.outerWidth=function(withMargin){if(withMargin){var width=this.offsetWidth;var style=getComputedStyle(this);width+=parseInt(style.marginLeft,10)+parseInt(style.marginRight,10);return width}return this.offsetWidth};HTMLElement.prototype.show=function(visible){if(visible){this.css({"display":"",visibility:""})}else{this.style.display="none"}};HTMLElement.prototype.isVisible=function(){return this.css("display")!=="none"};HTMLElement.prototype.toggleVisible=function(){this.show(!this.isVisible())};HTMLElement.prototype.html=function(st){if(arguments.length===0){return this.innerHTML}this.innerHTML=st;return this};HTMLElement.prototype.text=function(){return this.textContent};HTMLElement.prototype.parent=function(){return this.parentNode};HTMLElement.prototype.outerHtml=function(st){if(arguments.length===1){this.outerHTML=st}else{return this.outerHTML}};HTMLElement.prototype.attr=function(name,value){if(arguments.length===2){this.setAttribute(name,value)}else{return this.getAttribute(name)}};HTMLElement.prototype.attrs=function(attributes){if(arguments.length===1){for(var a in attributes){this.attr(a,attributes[a])}return this}return[]};HTMLElement.prototype.contains=function(item){var it=item;if(isDef(item)){while(it.parentNode!==null&&it!==this){it=it.parentNode}return it===this}return false};HTMLElement.prototype.offset=function(){var rect=this.getBoundingClientRect();return{top:rect.top+document.body.scrollTop,left:rect.left+document.body.scrollLeft}};HTMLElement.prototype.qs=function(selector){return this.querySelector(selector)};HTMLElement.prototype.qsa=function(selector){return this.querySelectorAll(selector)};HTMLElement.prototype.qsn=function(name){return this.querySelector("[name='"+name+"']")};HTMLElement.prototype.qsnames=function(name){return this.querySelectorAll("[name='"+name+"']")};HTMLFormElement.prototype.val=function(){var dic={};var formdata=new FormData(this);var done=false;var iterator=formdata.entries();do{var prop=iterator.next();if(prop.done&&!prop.value){done=true}else{dic[prop.value[0]]=prop.value[1]}}while(!done);return dic};HTMLFormElement.prototype.setInputs=function(obj){var triggerChange=arguments.length>1&&arguments[1]!==undefined?arguments[1]:true;var evt=new Event("change");for(var key in obj){var val=obj[key];var inputs=this.qsa("[name='"+key+"']");if(inputs){if(inputs.length>1){var _iteratorNormalCompletion3=true;var _didIteratorError3=false;var _iteratorError3=undefined;try{for(var _iterator3=inputs[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=true){var input=_step3.value;if(input.checked){input.checked=false}var vals=String(val).split(",");var _iteratorNormalCompletion4=true;var _didIteratorError4=false;var _iteratorError4=undefined;try{for(var _iterator4=vals[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=true){var v=_step4.value;if(input.value===v){input.checked=true;if(triggerChange){input.dispatchEvent(evt)}break}}}catch(err){_didIteratorError4=true;_iteratorError4=err}finally{try{if(!_iteratorNormalCompletion4&&_iterator4.return){_iterator4.return()}}finally{if(_didIteratorError4){throw _iteratorError4}}}}}catch(err){_didIteratorError3=true;_iteratorError3=err}finally{try{if(!_iteratorNormalCompletion3&&_iterator3.return){_iterator3.return()}}finally{if(_didIteratorError3){throw _iteratorError3}}}}else if(inputs.length===1){var _input=inputs[0];if(_input.type==="checkbox"){if(_input.checked){_input.checked=false}if(_input.value==val){_input.checked=true}}else{_input.value=val}}}}};HTMLFormElement.prototype.setNoChanges=function(){var inputs=this.elements;var _iteratorNormalCompletion5=true;var _didIteratorError5=false;var _iteratorError5=undefined;try{for(var _iterator5=inputs[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=true){var input=_step5.value;input.setNoChanges()}}catch(err){_didIteratorError5=true;_iteratorError5=err}finally{try{if(!_iteratorNormalCompletion5&&_iterator5.return){_iterator5.return()}}finally{if(_didIteratorError5){throw _iteratorError5}}}};HTMLFormElement.prototype.isModified=function(){var inputs=this.elements;var _iteratorNormalCompletion6=true;var _didIteratorError6=false;var _iteratorError6=undefined;try{for(var _iterator6=inputs[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=true){var input=_step6.value;if(input.isModified()){return true}}}catch(err){_didIteratorError6=true;_iteratorError6=err}finally{try{if(!_iteratorNormalCompletion6&&_iterator6.return){_iterator6.return()}}finally{if(_didIteratorError6){throw _iteratorError6}}}return false};HTMLInputElement.prototype.toTextBox=function(){this.attr("type","text")};HTMLInputElement.prototype.toPasswordBox=function(){this.attr("type","password")};HTMLInputElement.prototype.togglePassword=function(){var type=this.attr("type");if(type==="text"){this.attr("type","password")}else if(type==="password"){this.attr("type","text")}else{throw Error("type conversion error")}};HTMLInputElement.prototype.setNoChanges=function(){var type=this.attr("type");if(type==="checkbox"||type==="radio"){this.attr("old",this.checked)}else{this.attr("old",this.value)}};HTMLInputElement.prototype.isModified=function(){var type=this.attr("type");if(type==="checkbox"||type==="radio"){return this.attr("old")!==""+this.checked}return this.attr("old")!==this.value};HTMLInputElement.prototype.val=function(){if(arguments.length==1){this.value=arguments[0]}return this.value};HTMLSelectElement.prototype.val=function(){var value="";var _iteratorNormalCompletion7=true;var _didIteratorError7=false;var _iteratorError7=undefined;try{for(var _iterator7=this.selectedOptions[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=true){var opt=_step7.value;value+=opt.value+","}}catch(err){_didIteratorError7=true;_iteratorError7=err}finally{try{if(!_iteratorNormalCompletion7&&_iterator7.return){_iterator7.return()}}finally{if(_didIteratorError7){throw _iteratorError7}}}if(value.length>0){value=value.substring(0,value.length-1)}return value};HTMLSelectElement.prototype.setNoChanges=function(){this.attr("old",this.val())};HTMLSelectElement.prototype.isModified=function(){return this.attr("old")!==this.val()};HTMLSelectElement.prototype.fill=function(data,keyName,valueName,linkData){var _this=this;this.options.length=0;data.forEach(function(element){var option=newElement("option");option.text=element[keyName];option.value=element[valueName];if(linkData){option.data=element}_this.add(option)})};HTMLSelectElement.prototype.load=function(url,keyName,valueName,linkData){document.getJSON(url,function(data){this.fill(data,keyName,valueName,linkData)},function(err){this.options.length=0})};HTMLTextAreaElement.prototype.insertAtCaret=function(text){text=text||"";if(document.selection){this.focus();var sel=document.selection.createRange();sel.text=text}else if(this.selectionStart||this.selectionStart===0){var startPos=this.selectionStart;var endPos=this.selectionEnd;this.value=this.value.substring(0,startPos)+text+this.value.substring(endPos,this.value.length);this.selectionStart=startPos+text.length;this.selectionEnd=startPos+text.length}else{this.value+=text}};HTMLTextAreaElement.prototype.val=function(){if(arguments.length==1){this.value=arguments[0]}return this.value};HTMLTextAreaElement.prototype.setNoChanges=function(){var value=this.value;var id=this.name+"_old";var elem=qsi(id);if(elem===null){var elem=newElement("div",{id:this.name+"_old"},value,null,{display:"none"});this.afterEnd(elem)}else{elem.innerHTML=value}};HTMLTextAreaElement.prototype.isModified=function(){var id=this.name+"_old";var elem=qsi(id);if(elem==null){return false}return elem.innerHTML!==this.value};window.newElement=function(tagName,attributes,htmlContent,events,css){var tag=document.createElement(tagName);if(attributes){tag.attrs(attributes)}if(htmlContent){tag.html(htmlContent)}if(events){for(var ev in events){tag.addEventListener(ev,events[ev])}}if(css){tag.css(css)}return tag};window.qs=function(id){return document.querySelector(id)};window.qsa=function(selectors){return document.querySelectorAll(selectors)};window.qsi=function(id){return document.querySelector("#"+id)};window.qsn=function(name){return document.querySelector("[name='"+name+"']")};window.qsnames=function(name){return document.querySelectorAll("[name='"+name+"']")};if(!NodeList.prototype.forEach){NodeList.prototype.forEach=function(fn){if(fn){for(var i=0;i<this.length;i++){var it=this[i];fn(it,i,this)}}}}NodeList.prototype.forObject=function(fn){debugger;fn.apply(null,this)};NodeList.prototype.addClass=function(classNames){this.forEach(function(it){return it.addClass(classNames)})};NodeList.prototype.removeClass=function(classNames){this.forEach(function(it){return it.removeClass(classNames)})};NodeList.prototype.toggleClass=function(classNames){this.forEach(function(it){return it.toggleClass(classNames)})};NodeList.prototype.class=function(classNames){this.forEach(function(it){return it.class(classNames)})};NodeList.prototype.css=function(cssProperty,cssValue){this.forEach(function(it){return it.css(cssProperty,cssValue)})};NodeList.prototype.show=function(visible){this.forEach(function(it){return it.show(visible)})};NodeList.prototype.remove=function(){this.forEach(function(it){return it.remove()})};